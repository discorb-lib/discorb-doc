{"pageProps":{"path":"docs/Examples.md","data":{"title":"Examples"},"content":"<!--\n# @title Examples\n-->\n\n# Examples\n\n## Simple ping pong\n\n```ruby\nrequire \"discorb\"\n\nclient = Discorb::Client.new\n\nclient.once :standby do\n  puts \"Logged in as #{client.user}\"\nend\n\nclient.on :message do |message|\n  next if message.author.bot?\n  next unless message.content == \"ping\"\n\n  message.channel.post(\"Pong!\")\nend\n\nclient.run(ENV[\"DISCORD_BOT_TOKEN\"])\n\n```\n\n## Wait for a message\n\n```ruby\nrequire \"discorb\"\n\nclient = Discorb::Client.new\n\nclient.once :standby do\n  puts \"Logged in as #{client.user}\"\nend\n\nclient.on :message do |message|\n  next if message.author.bot?\n  next unless message.content == \"!quiz\"\n\n  operator = [:+, :-, :*].sample\n  num1 = rand(1..10)\n  num2 = rand(1..10)\n\n  val = num1.send(operator, num2)\n  message.channel.post(\"Quiz: `#{num1} #{operator} #{num2}`\")\n  begin\n    msg = client.event_lock(:message, 30) { |m|\n      m.content == val.to_s && m.channel == message.channel\n    }.wait\n  rescue Discorb::TimeoutError\n    message.channel.post(\"No one answered...\")\n  else\n    msg.reply(\"Correct!\")\n  end\nend\n\nclient.run(ENV[\"DISCORD_BOT_TOKEN\"])\n\n```\n\n## Use components\n\n### Authorization button\n\n```ruby\nrequire \"discorb\"\n\nclient = Discorb::Client.new\n\ndef convert_role(guild, string)\n  guild.roles.find do |role|\n    role.id == string || role.name == string || role.mention == string\n  end\nend\n\nclient.once :standby do\n  puts \"Logged in as #{client.user}\"\nend\n\nclient.on :message do |message|\n  next if message.author.bot?\n  next unless message.content.start_with?(\"!auth \")\n\n  role_name = message.content.delete_prefix(\"!auth \")\n  role = convert_role(message.guild, role_name)\n  if role.nil?\n    message.reply(\"Unknown role: #{role_name}\").wait\n    next\n  end\n  message.channel.post(\n    \"Click this button if you are human:\",\n    components: [\n      Discorb::Button.new(\n        \"Get role\", custom_id: \"auth:#{role.id}\",\n      ),\n    ],\n  )\nend\n\nclient.on :button_click do |response|\n  if response.custom_id.start_with?(\"auth:\")\n    id = response.custom_id.delete_prefix(\"auth:\")\n    response.fired_by.add_role(id).wait\n    response.post(\"You got your role!\\nHere's your role: <@&#{id}>\", ephemeral: true)\n  end\nend\n\nclient.run(ENV[\"DISCORD_BOT_TOKEN\"])\n\n```\n\n### Pagination with select menu\n\n```ruby\nrequire \"discorb\"\n\nclient = Discorb::Client.new\n\nSECTIONS = [\n  [\"About\", <<~WIKI],\n    Ruby is an interpreted, high-level, general-purpose programming language.\n    It was designed and developed in the mid-1990s by Yukihiro \"Matz\" Matsumoto in Japan.\\n\\n\n    Ruby is dynamically typed and uses garbage collection and just-in-time compilation.\n    It supports multiple programming paradigms, including procedural, object-oriented, and functional programming.\n    According to the creator, Ruby was influenced by Perl, Smalltalk, Eiffel, Ada, BASIC, and Lisp.\n  WIKI\n  [\"Early concept\", <<~WIKI],\n    Matsumoto has said that Ruby was conceived in 1993.\n    In a 1999 post to the ruby-talk mailing list, he describes some of his early ideas about the language:\n    > I was talking with my colleague about the possibility of an object-oriented scripting language.\n    > I knew Perl (Perl4, not Perl5), but I didn't like it really, because it had the smell of a toy language (it still has).\n    > The object-oriented language seemed very promising. I knew Python then.\n    > But I didn't like it, because I didn't think it was a true object-oriented language - OO features appeared to be add-on to the language.\n    > As a language maniac and OO fan for 15 years, I really wanted a genuine object-oriented, easy-to-use scripting language. I looked for but couldn't find one.\n    > So I decided to make it.\n    Matsumoto describes the design of Ruby as being like a simple Lisp language at its core, with an object system like that of Smalltalk, blocks inspired by higher-order functions, and practical utility like that of Perl.\n  WIKI\n  [\"First publication\", <<~WIKI],\n    The first public release of Ruby 0.95 was announced on Japanese domestic newsgroups on December 21, 1995.\n    Subsequently, three more versions of Ruby were released in two days.\n    The release coincided with the launch of the Japanese-language ruby-list mailing list, which was the first mailing list for the new language.\n\n    Already present at this stage of development were many of the features familiar in later releases of Ruby, including object-oriented design, classes with inheritance, mixins, iterators, closures, exception handling and garbage collection.\n  WIKI\n].freeze\n\nWIKIPEDIA_CREDIT = \"(From: [Wikipedia](https://en.wikipedia.org/wiki/Ruby_(programming_language)))\"\n\nclient.once :standby do\n  puts \"Logged in as #{client.user}\"\nend\n\nclient.on :message do |message|\n  next if message.author.bot?\n  next unless message.content == \"!ruby\"\n\n  options = SECTIONS.map.with_index { |section, i| Discorb::SelectMenu::Option.new(\"Page #{i + 1}\", \"sections:#{i}\", description: section[0]) }\n  message.channel.post(\n    \"Select a section\", components: [Discorb::SelectMenu.new(\"sections\", options)],\n  )\nend\n\nclient.on :select_menu_select do |response|\n  next unless response.custom_id == \"sections\"\n\n  id = response.value.delete_prefix(\"sections:\")\n  selected_section = SECTIONS[id.to_i]\n  response.post(\n    \"**#{selected_section[0]}**\\n\" \\\n    \"#{selected_section[1].strip}\\n\\n\" \\\n    \"#{WIKIPEDIA_CREDIT}\", ephemeral: true,\n  )\nend\n\nclient.run(ENV[\"DISCORD_BOT_TOKEN\"])\n\n```\n\n#### Note\n\nThis example is not shown correctly in the docs.\n[Read this example on GitHub](https://github.com/discorb-lib/discorb/blob/main/examples/components/select_menu.rb)."},"__N_SSG":true}